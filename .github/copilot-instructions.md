# Copilot Instructions for Calendar-Modular

## Project Overview
A modular calendar management tool that allows users to import calendars from multiple sources (Google, Outlook, Apple), manipulate events as drag-and-drop blocks, and share availability with others. Key differentiator: one-time imports with flexible manipulation rather than live sync.

**Developer Context**: The project owner is non-technical and relies on AI assistance for all code implementation. Write complete, production-ready code with clear explanations. Provide step-by-step terminal commands and assume no prior coding knowledge.

## Architecture & Tech Stack

### Frontend
- **Framework**: React + TypeScript
- **Hosting**: Vercel (user familiar with this)
- **Default View**: Week view (user-customizable to day/week/month)
- **UI Pattern**: Clean structured app with drag-and-drop time blocks
- **UI Library**: Shadcn/ui or Chakra UI for pre-built components
- **Drag & Drop**: @dnd-kit/core or react-beautiful-dnd
- **Calendar Component**: react-big-calendar or custom implementation
- **Mascot**: Quirky ditto character

### Backend & Data
- **Backend Service**: Supabase (handles database, auth, file storage)
- **Database**: Supabase PostgreSQL
- **File Storage**: Supabase Storage for PDF uploads
- **Auth**: Email/password + social logins (Google, Microsoft, Apple)

### External Integrations
- **Calendar APIs**: Google Calendar, Microsoft Outlook, Apple Calendar (all three from start)
- **PDF Parsing**: Google Gemini (free tier) for extracting events from PDF calendars
- **Import Behavior**: One-time copy (not synced) - events become independent once imported
- **Export Behavior**: Smart merge - only add new/changed events to avoid duplicates

## Core Design Principles

### Event Manipulation
- **Required Fields**: Title, time, duration
- **Optional Fields**: Description, location, attendees
- **Time Block Resizing**: Snap to 15-minute increments
- **Drag & Drop**: Allow overlap but show visual warnings
- **Conflict Handling**: Warn but let user decide (user has final control)
- **Color Coding**: Preset categories (work, personal, meetings, etc.)
- **Recurring Events**: Basic patterns (daily, weekly, monthly)

### Privacy & Sharing Model
- **Shared Calendar View**: Show only busy/free time blocks (no event details)
- **Calendar Overlay**: Two methods available
  1. Request-based (requires approval)
  2. Sharing link (generated by calendar owner)
- **Multi-Person Scheduling**: Visual indicators showing how many people are available per slot

### Scheduling Features
- **Scheduling Links**: Pre-defined time slots only (user sets availability windows)
- **Booking Behavior**: All bookings are pending requests (user accepts/declines)
- **Time Suggestions**: Visual highlights of free slots + smart suggestions based on patterns
- **Time Zones**: Start with local timezone only, add multi-zone support in Phase 4

### Notifications
- **In-app only** with browser notifications when tool is open
- **No email notifications** (intentional simplification)

## Implementation Phases

See `DECISIONS.md` for the 4-phase rollout plan:
1. **Phase 1**: Core calendar view, drag-and-drop, import from 3 calendar services, auth
2. **Phase 2**: Scheduling links, calendar sharing, meeting requests
3. **Phase 3**: PDF parsing, multi-person overlay, smart suggestions, export
4. **Phase 4**: Multi-timezone, advanced recurring patterns, mobile, performance

## Development Guidelines

### When Implementing Calendar Views
- Default to week view but make view type easily switchable
- 15-minute snap increments are the standard grid unit
- Time blocks must be draggable and resizable from both top and bottom edges
- Show overlap warnings visually but don't prevent overlaps

### When Building Import/Export
- Import = one-time snapshot (events become local copies)
- Export = compare and merge (detect duplicates by comparing title + time + duration)
- Support iCalendar format for all three calendar providers

### When Implementing Sharing
- Never expose event details in shared views - only show busy/free status
- Scheduling links only offer times the owner pre-defined
- All booking requests go to pending state for user approval

### When Adding Authentication
- Implement both email/password and OAuth (Google, Microsoft, Apple) from the start
- Supabase handles the auth infrastructure

### Key Files to Reference
- `README.md`: Original product requirements and feature ideas
- `DECISIONS.md`: Technical specifications and implementation decisions

## User's Development Environment

### Tools & Platforms the User Knows
- **VSCode**: Primary code editor
- **GitHub**: Version control and repository hosting
- **Vercel**: Deployment platform (experienced user)
- **Supabase**: Backend service (familiar with dashboard and setup)
- **Figma**: UI/UX design tool
- **Figma Make**: Design-to-code conversion
- **Claude & Copilot**: AI coding assistants

### Coding Guidance for AI Assistants
- User is **non-technical** - explain all code concepts in simple terms
- Provide **complete, copy-paste ready code** with file paths clearly marked
- Include **exact terminal commands** with explanations of what each does
- Structure responses as **step-by-step instructions** (e.g., "Step 1: Create file X", "Step 2: Run command Y")
- When errors occur, explain in plain language what went wrong and how to fix it
- Avoid jargon - use analogies and everyday language to explain technical concepts
